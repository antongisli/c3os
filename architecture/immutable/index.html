<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.91.2" />
    <meta name="description" content="Documentation for c3os">
<meta name="author" content="Ettore Di Giacinto">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Immutable layout :: c3os documentation</title>

    
    <link href="/css/nucleus.css?1663191160" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1663191160" rel="stylesheet">
    <link href="/css/hybrid.css?1663191160" rel="stylesheet">
    <link href="/css/featherlight.min.css?1663191160" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1663191160" rel="stylesheet">
    <link href="/css/auto-complete.css?1663191160" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1663191160" rel="stylesheet">
    <link href="/css/theme.css?1663191160" rel="stylesheet">
    <link href="/css/tabs.css?1663191160" rel="stylesheet">
    <link href="/css/hugo-theme.css?1663191160" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1663191160" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1663191160"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/architecture/immutable/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      
<a href="https://docs.c3os.io">
<img src="https://user-images.githubusercontent.com/2420543/153508410-a806a385-ae3e-417e-b87e-7472f21689e3.png">
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1663191160"></script>
<script type="text/javascript" src="/js/auto-complete.js?1663191160"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/docs.c3os.io";
    
</script>
<script type="text/javascript" src="/js/search.js?1663191160"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/quickstart/" title="Quickstart" class="dd-item
        
        
        
        ">
      <a href="/quickstart/">
          Quickstart
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/quickstart/installation/" title="Installation" class="dd-item ">
        <a href="/quickstart/installation/">
        Installation
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/installation/" title="Installation reference" class="dd-item
        
        
        
        ">
      <a href="/installation/">
          Installation reference
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/installation/manual/" title="Manual installation" class="dd-item ">
        <a href="/installation/manual/">
        <b>- </b>Manual installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/installation/interactive/" title="Interactive installation" class="dd-item ">
        <a href="/installation/interactive/">
        <b>- </b>Interactive installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/installation/automated/" title="Automated installation" class="dd-item ">
        <a href="/installation/automated/">
        <b>- </b>Automated installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/installation/p2p/" title="Full P2P mesh support" class="dd-item ">
        <a href="/installation/p2p/">
        <b>- </b>Full P2P mesh support
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/installation/raspberry/" title="Raspberry" class="dd-item ">
        <a href="/installation/raspberry/">
        <b>- </b>Raspberry
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/installation/takeover/" title="Take over installation" class="dd-item ">
        <a href="/installation/takeover/">
        <b>- </b>Take over installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/installation/netboot/" title="Netboot installation" class="dd-item ">
        <a href="/installation/netboot/">
        <b>- </b>Netboot installation
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/upgrade/" title="Upgrade" class="dd-item
        
        
        
        ">
      <a href="/upgrade/">
          Upgrade
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/upgrade/manual/" title="Manual" class="dd-item ">
        <a href="/upgrade/manual/">
        <b>- </b>Manual
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/upgrade/kubernetes/" title="Upgrading from Kubernetes" class="dd-item ">
        <a href="/upgrade/kubernetes/">
        <b>- </b>Upgrading from Kubernetes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/architecture/" title="Architecture" class="dd-item
        parent
        
        
        ">
      <a href="/architecture/">
          Architecture
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/architecture/container/" title="Container based OS" class="dd-item ">
        <a href="/architecture/container/">
        <b>- </b>Container based OS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/architecture/immutable/" title="Immutable layout" class="dd-item active">
        <a href="/architecture/immutable/">
        <b>- </b>Immutable layout
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/architecture/meta/" title="Meta-Distribution" class="dd-item ">
        <a href="/architecture/meta/">
        <b>- </b>Meta-Distribution
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/architecture/network/" title="P2P Network" class="dd-item ">
        <a href="/architecture/network/">
        <b>- </b>P2P Network
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/examples/" title="Examples" class="dd-item
        
        
        
        ">
      <a href="/examples/">
          Examples
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/examples/examples/" title="Common setup" class="dd-item ">
        <a href="/examples/examples/">
        <b>- </b>Common setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/examples/configuration/" title="Configuring a node after install" class="dd-item ">
        <a href="/examples/configuration/">
        <b>- </b>Configuring a node after install
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/reference/" title="Reference" class="dd-item
        
        
        
        ">
      <a href="/reference/">
          Reference
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/paths/" title="Paths" class="dd-item ">
        <a href="/reference/paths/">
        <b>- </b>Paths
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/cli/" title="CLI" class="dd-item ">
        <a href="/reference/cli/">
        <b>- </b>CLI
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/troubleshooting/" title="Troubleshooting" class="dd-item ">
        <a href="/reference/troubleshooting/">
        <b>- </b>Troubleshooting
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/configuration/" title="Configuration reference" class="dd-item ">
        <a href="/reference/configuration/">
        <b>- </b>Configuration reference
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/recovery_mode/" title="Remote Recovery mode" class="dd-item ">
        <a href="/reference/recovery_mode/">
        <b>- </b>Remote Recovery mode
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/customizing/" title="Customizing the system image" class="dd-item ">
        <a href="/reference/customizing/">
        <b>- </b>Customizing the system image
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/c3os-io/c3os"><i class='fab fa-fw fa-github'></i> Github</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/c3os-io/c3os/discussions"><i class='fas fa-fw fa-comments'></i> Github discussions</a>
              </li>
          
              <li>
                  <a class="padding" href="https://web.libera.chat/#c3os"><i class='fas fa-fw fa-comments'></i> Libera chat</a>
              </li>
          
              <li>
                  <a class="padding" href="https://matrix.to/#/#c3os:matrix.org"><i class='fas fa-fw fa-comments'></i> Matrix chat</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/c3os-io/provider-c3os/releases"><i class='fas fa-solid fa-download'></i> Download</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/c3os-io/c3os/releases"><i class='fas fa-solid fa-download'></i> Download core (without k3s)</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/c3os-io/c3os/edit/master/docs/content/architecture/immutable.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/architecture/'>Architecture</a> > Immutable layout
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#benefits-of-using-an-immutable-system">Benefits of using an Immutable system</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Immutable layout
            </h1>
          

        


<p>c3os adopts an Immutable layout, and derivatives created with its toolkit inherits the same immutability aspects.</p>
<p>An immutable OS is a carefully engineered system which boots in a restricted, permissionless mode, where certain paths of the system are not writeable. For instance, after installation it&rsquo;s not possible to install additional packages in the system, and any configuration change is discarded after reboot.</p>
<p>A running Linux based OS system will look like with the following paths:</p>
<pre tabindex="0"><code>/usr/local - persistent ( partition label COS_PERSISTENT)
/oem - persistent ( partition label COS_OEM)
/etc - ephemeral
/usr - read only
/ immutable
</code></pre><p><code>/usr/local</code> will contain all the persistent data which will be carried over in-between upgrades, instead, any change to <code>/etc</code> will be discarded.</p>
<h2 id="benefits-of-using-an-immutable-system">Benefits of using an Immutable system</h2>
<p>There are many reasons why you would like so, and this is a genuine, good question. There are various perspective you can see at this, from a security standpoint, it is far more secure than traditional systems - most of attack vectors relies on writing on the system, or either installing persistent tools after a vector has been exploited.</p>
<p>From a maintenance perspective, configuration management tools like Chef, Puppet, or alikes are not needed as Immutable systems have only a configuration entrypoint, every other configuration is cleaned up automatically after a reboot.</p>
<p>The benefit of rolling out the same system over a set of machines are obvious:</p>
<ul>
<li>No snowflakes - all the machines ships the same image, configuration settings, and behavior. this allows to have a predictable infrastructure, predictable upgrades and homogeneus configurations across your cluster</li>
<li>Configuration is driven via cloud-init. There is only one source of truth for configuration, and that does happen at bootstrap time. Anything else it&rsquo;s handled afterwards natively via Kubernetes, so no configuration management software is required.</li>
<li>Reduced attack surface - Immutable systems cannot be modified or tampered on runtime. This enhances the security of a running OS as changes on the system are not allowed.</li>
</ul>
<p>Tools like Chef, Puppet and Ansible share the same underlying issues when it comes to configuration management: nodes can have different versions matrix of software and OS, which makes your set of nodes dishomogeneous and difficult to maintain and orchestrate from day 1 to day 2.</p>
<p>c3os tackles the issue from another angle, as can turn <em>any</em> distribution to an “immutable” system, distributed as a standard container image, which gets provisioned to the devices as declared. This allows to treat OSes with the same repeatable portability as containers for apps, removing snowflakes in your cluster. Container registries can be used either internally or externally to the cluster to propagate upgrades with customized versions of the OS (kernel, packages, etc).</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/architecture/container/" title="Container based OS"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/architecture/meta/" title="Meta-Distribution" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1663191160"></script>
    <script src="/js/perfect-scrollbar.min.js?1663191160"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1663191160"></script>
    <script src="/js/jquery.sticky.js?1663191160"></script>
    <script src="/js/featherlight.min.js?1663191160"></script>
    <script src="/js/highlight.pack.js?1663191160"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1663191160"></script>
    <script src="/js/learn.js?1663191160"></script>
    <script src="/js/hugo-learn.js?1663191160"></script>
    
        
            <script src="/mermaid/mermaid.js?1663191160"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

